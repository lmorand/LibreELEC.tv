From 4ad4aa38fa34e60582ce64a8ee698f1e2bf9d7ae Mon Sep 17 00:00:00 2001
From: Icecream95 <ixn@disroot.org>
Date: Mon, 6 Sep 2021 21:38:43 +1200
Subject: [PATCH] lima: Fix crashes for GPUs with more than four cores

Reviewed-by: Erico Nunes <nunes.erico@gmail.com>
Part-of: <https://gitlab.freedesktop.org/mesa/mesa/-/merge_requests/12738>
---
 src/gallium/drivers/lima/lima_job.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/gallium/drivers/lima/lima_job.c b/src/gallium/drivers/lima/lima_job.c
index 9503075931a..ef8a6444cb9 100644
--- a/src/gallium/drivers/lima/lima_job.c
+++ b/src/gallium/drivers/lima/lima_job.c
@@ -552,8 +552,8 @@ lima_generate_pp_stream(struct lima_job *job, int off_x, int off_y,
     */
    int max = MAX2(tiled_w, tiled_h);
    int index = 0;
-   uint32_t *stream[4];
-   int si[4] = {0};
+   uint32_t *stream[8];
+   int si[8] = {0};
    int dim = 0;
    int count = 0;
 
